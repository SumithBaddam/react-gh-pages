(this["webpackJsonpreact-gh-pages"]=this["webpackJsonpreact-gh-pages"]||[]).push([[0],{33:function(e,t,a){e.exports=a(60)},60:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(30),s=a.n(i),r=a(16),c=a(9),o=a(10),m=a(11),g=a(14),u=a(13),h=a(17),p=a.n(h),f=a(12),d=function(e){Object(g.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).getURL=function(){console.log(window.location.href);var e=window.location.href.split("=")[1];n.state.url=e,fetch("http://localhost:3001/recipe?item="+e).then((function(e){return e.json()})).then((function(e){return n.setState({ingredients:e.ingredients})}))},n.state={ingredients:"",recipe:"",url:""},n.getURL(),n}return Object(o.a)(a,[{key:"render",value:function(){var e="",t=this.state.ingredients.split(",");if(this.state.ingredients)e=t.map((function(e){return l.a.createElement("li",null,e)}));return l.a.createElement("div",null,l.a.createElement("p",null,"Recipe:",this.state.recipe,e))}}]),a}(n.Component),E=function(e){Object(g.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).selectFiles=function(e){for(var t=[],a=0;a<e.target.files.length;a++)t[a]=e.target.files[a];t=t.filter((function(e){return e.name.match(/\.(jpg|jpeg|png|gif)$/)}));var l="".concat(t.length," valid image(s) selected");n.setState({images:t,message:l})},n.uploadImages=function(){var e=n.state.images.map((function(e){var t=new FormData;return t.append("image",e,e.name),p.a.post("http://localhost:5000/upload",t).then((function(e){console.log(e.data),n.setState({imageUrl:e.data.imageUrl})}))}));fetch("http://localhost:3001/classification?image_path=public/images/&image_name=").then((function(e){return e.json()})).then((function(e){return n.setState({classification:e.predicted})})),p.a.all(e).then((function(){console.log("done")})).catch((function(e){return alert(e.message)}))},n.similarImages=function(){console.log(n.state.classification),fetch("http://localhost:3001/similarity?image_path=public/images/&classes="+n.state.classification).then((function(e){return e.json()})).then((function(e){return n.setState({similar_images:e.similarImages})})),console.log(n.state.similar_images)},n.getIngredients=function(){console.log(n.state.classification),fetch("http://localhost:3001/imagetorecipe?image_path=public/images/&classes="+n.state.classification).then((function(e){return e.json()})).then((function(e){return n.setState({recipe:e.recipe})})),console.log(n.state.recipe)},n.cookingSuggestions=function(e){console.log(n.state.ingredients);console.log(n.state.classification),fetch("http://localhost:3001/ingredientstoimage?ingredients="+n.state.ingredients).then((function(e){return e.json()})).then((function(e){return n.setState({suggestionImages:e.images})}))},n.state={images:[],imageUrls:[],message:"",similar_images:"",classification:"",recipe:"",ingredients:""},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n}return Object(o.a)(a,[{key:"handleChange",value:function(e){this.setState({ingredients:e.target.value})}},{key:"render",value:function(){var e,t="",a=this.state.recipe.split(",");if(this.state.recipe)t=a.map((function(e){return l.a.createElement("li",null,e)}));var n="";if(this.state.similar_images)n=this.state.similar_images.split(",").map((function(e){return l.a.createElement("a",{href:"http://localhost:3000/recipe?item="+e},l.a.createElement("img",{src:"food-101/images/"+e,height:"100",width:"100",style:{marginLeft:"10px"}}))}));var i="";if(this.state.suggestionImages)i=this.state.suggestionImages.split(",").map((function(e){return l.a.createElement("a",{href:"http://localhost:3000/recipe?item="+e},l.a.createElement("img",{src:"data/"+e,height:"100",width:"100",style:{marginLeft:"10px"}}))}));return l.a.createElement(f.a,null,l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("div",{className:"col-sm-12"},l.a.createElement("h3",null,"Image Uploader"),l.a.createElement("hr",null),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("input",{className:"form-control ",type:"file",onChange:this.selectFiles,multiple:!0}),l.a.createElement("br",null),l.a.createElement("div",{className:"col-sm-4"},l.a.createElement("button",{className:"btn btn-primary",value:"Submit",onClick:this.uploadImages},"Upload")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h5",null," Get recipe and cooking suggestions from ingredients"),l.a.createElement("input",{className:"form-control ",placeholder:"Enter ingredients",type:"text",value:this.state.ingredients,onChange:this.handleChange}),l.a.createElement("br",null),l.a.createElement("button",{className:"btn btn-primary",onClick:this.cookingSuggestions},"Fetch suggestions"),l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement("div",{className:"row col-lg-12"},i),this.state.message?l.a.createElement("p",{className:"text-info"},this.state.message):"",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"row col-lg-12"},this.state.imageUrls.map((function(e,t){return l.a.createElement("div",{className:"col-lg-2",key:t},l.a.createElement("img",{src:"http://localhost:5000/"+e,className:"img-rounded img-responsive",alt:"not available"}),l.a.createElement("br",null))})),l.a.createElement("div",{className:"row col-lg-12"},l.a.createElement("img",{src:this.state.imageUrl,height:"100",width:"100",style:{marginLeft:"20px"}}),l.a.createElement("p",(e={style:{color:"blue"}},Object(r.a)(e,"style",{fontSize:"18px"}),Object(r.a)(e,"style",{marginLeft:"20px"}),e)," ",this.state.classification," "),l.a.createElement("button",{className:"btn btn-primary",value:"Ingredients",onClick:this.getIngredients,style:{marginLeft:"15px"}},"Get Ingredients"),l.a.createElement("ul",null,t),l.a.createElement("button",{className:"btn btn-primary",value:"Similarity",onClick:this.similarImages,style:{marginLeft:"15px"}},"Run similar images"),l.a.createElement("hr",null)),l.a.createElement("div",{className:"row col-lg-12"},n))))}}]),a}(n.Component),b=a(6);s.a.render(l.a.createElement(f.a,null,l.a.createElement(b.c,null,l.a.createElement(b.a,{exact:!0,path:"/",component:E}),l.a.createElement(b.a,{path:"/recipe",component:d}))),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.05c057ed.chunk.js.map