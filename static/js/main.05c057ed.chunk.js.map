{"version":3,"sources":["Components/fetchImages.js","App.js","index.js"],"names":["Index","props","getURL","console","log","window","location","href","item","split","state","url","fetch","then","response","json","data","setState","ingredients","recipe","all_ingredients","ingr","this","map","rec","Component","App","selectFiles","event","images","i","target","files","length","filter","image","name","match","message","uploadImages","uploaders","FormData","append","axios","post","BASE_URL","imageUrl","classification","predicted","all","catch","err","alert","similarImages","similar_images","getIngredients","cookingSuggestions","suggestionImages","imageUrls","handleChange","bind","value","all_recipes","recipes","src","height","width","style","marginLeft","suggestion_images","className","type","onChange","multiple","onClick","placeholder","key","alt","color","fontSize","ReactDOM","render","exact","path","component","Ingredients","document","getElementById"],"mappings":"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","file":"static/js/main.05c057ed.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\n\r\nexport default class Index extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        \tingredients: '',\r\n            recipe: '',\r\n            url: ''\r\n        }\r\n        {this.getURL()}\r\n    }\r\n\r\n    getURL = () => {\r\n        //alert(\"The URL of this page is: \" + window.location.href);\r\n        console.log(window.location.href);\r\n        const item = window.location.href.split('=')[1]; \r\n        const getRecipeUrl = \"http://localhost:3001/recipe?item=\";\r\n        this.state.url = item;\r\n\r\n\t\tfetch(getRecipeUrl + item)\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(data => this.setState({ingredients: data.ingredients})\r\n\t\t\t);\r\n        \r\n\t\t\r\n\t\t//console.log(this.state.recipe);\r\n\r\n    }\r\n\r\n    render() {\r\n        var all_ingredients='';\r\n\t\tvar ingr = this.state.ingredients.split(',');\r\n\t\tif(this.state.ingredients){\r\n\t\t\tvar all_ingredients = ingr.map((rec) =>\r\n\t\t\t<li>{rec}</li>\r\n\t\t\t);\r\n\t\t}\r\n\r\n        return (\r\n            <div>\r\n                <p>Recipe:\r\n                    {this.state.recipe}\r\n                    {all_ingredients}\r\n                </p>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\nimport axios from 'axios';\n//import 'bootstrap/dist/css/bootstrap.min.css';\nimport { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom';\nimport Ingredients from './Components/fetchImages';\n\n//import logo from './images/uploads/cake.jpg';\n//import { BrowserRouter as Router, Switch, Route, Link } from 'react-router-dom';\n\nconst BASE_URL = 'http://localhost:5000/';\n//const express = require('express');\n//const cors = require('cors');\n//const app = express();\n//app.use(cors());\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        \timages: [],\n        \timageUrls: [],\n\t\t\tmessage: '',\n\t\t\tsimilar_images: '',\n\t\t\tclassification: '',\n\t\t\trecipe: '',\n\t\t\tingredients: ''\n\t\t}\n\t\tthis.handleChange = this.handleChange.bind(this);\n\n    }\n\n    selectFiles = (event) => {\n    \tlet images = [];\n    \tfor (var i = 0; i < event.target.files.length; i++) {\n            images[i] = event.target.files[i];\n        }\n        //this.setState({ images, message })\n        images = images.filter(image => image.name.match(/\\.(jpg|jpeg|png|gif)$/))\n        let message = `${images.length} valid image(s) selected`\n        this.setState({ images, message })\n    }\n\n    uploadImages = () => {\n    \n    \tconst uploaders = this.state.images.map(image => {\n\t\t    const data = new FormData();\n\t\t    data.append(\"image\", image, image.name);\n\t\t    \n\t\t\t// Make an AJAX upload request using Axios\n\t\t\t//console.log(data);\n\t    \treturn axios.post(BASE_URL + 'upload', data)\n\t    \t.then(response => {\n\t\t\t\tconsole.log(response.data);\n\t\t\t\tthis.setState({imageUrl: response.data.imageUrl});\n\t\t\t})\n\t\t});\n\t\t//const proxyurl = \"https://cors-anywhere.herokuapp.com/\";\n\t\tconst classificationUrl = \"http://localhost:3001/classification?image_path=public/images/&image_name=\";\n\t\tconst similarityUrl = \"http://localhost:3001/similarity?image_path=public/images/\";\n\t\t/*\n\t\tconst url2 = \"https://hn.algolia.com/api/v1/search?query=redux\";\n\t\tfetch(url2)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => this.setState({ classification: data.hits }));\n\t\t*/\n\n\t\t//console.log(this.state.imageUrl);\n\t\t//fetch(classificationUrl + this.state.imageUrl)\n\t\tfetch(classificationUrl)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => this.setState({ classification: data.predicted })\n\t\t\t);\n\n\t\taxios.all(uploaders).then(() => {\n\t\t\tconsole.log('done');\n\t\t})\n\t\t.catch(err => alert(err.message)\n\t\t);\n\n\t}\n\t\n    similarImages = () => {    \n\t\tconst classificationUrl = \"http://localhost:3001/classification?image_path=public/images/&image_name=\";\n\t\tconst similarityUrl = \"http://localhost:3001/similarity?image_path=public/images/&classes=\";\n\t\tconsole.log(this.state.classification);\n\t\tfetch(similarityUrl + this.state.classification)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => this.setState({ similar_images: data.similarImages})\n\t\t\t);\n\t\t\n\t\tconsole.log(this.state.similar_images);\n\t\t\n\n    }\n\tgetIngredients = () => {\n\t\tconst getRecipeUrl = \"http://localhost:3001/imagetorecipe?image_path=public/images/&classes=\";\n\t\tconsole.log(this.state.classification);\n\t\tfetch(getRecipeUrl + this.state.classification)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => this.setState({recipe: data.recipe})\n\t\t\t);\n\t\t\n\t\tconsole.log(this.state.recipe);\n\t}\n\n\thandleChange(event) {\n\t\tthis.setState({ingredients: event.target.value});\n\t}\n\n\tcookingSuggestions = (event) =>{\n\t\t//console.log('Logging input');\n\t\tconsole.log(this.state.ingredients);\n\t\tconst ingredientstoimage = \"http://localhost:3001/ingredientstoimage?ingredients=\";\n\t\tconsole.log(this.state.classification);\n\t\tfetch(ingredientstoimage + this.state.ingredients)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => this.setState({suggestionImages: data.images})\n\t\t\t);\n\n\t}\n\t\n\trender() {\n\t\t//let names = ['name1', 'name2', 'name3'];\n\t\t//const images = [];\n\t\t//const numbers = [1, 2, 3, 4, 5];\n\t\tvar all_recipes='';\n\t\tvar recipes = this.state.recipe.split(',');\n\t\tif(this.state.recipe){\n\t\t\tvar all_recipes = recipes.map((rec) =>\n\t\t\t<li>{rec}</li>\n\t\t\t);\n\t\t}\n\t\tvar images='';\n\t\tif(this.state.similar_images){\n\t\t\tconst names = this.state.similar_images.split(',');\n\t\t\tvar images = names.map((name) =>\n\t\t\t\t<a href={\"http://localhost:3000/recipe?item=\"+name}>\n\t\t\t\t\t<img src={\"food-101/images/\"+name} height=\"100\" width=\"100\" style={{marginLeft: '10px'}} />\n\t\t\t\t</a>\n\t\t\t);\n\t\t}\n\t\n\t\tvar suggestion_images='';\n\t\tif(this.state.suggestionImages){\n\t\t\tconst names = this.state.suggestionImages.split(',');\n\t\t\tvar suggestion_images = names.map((name) =>\n\t\t\t\t<a href={\"http://localhost:3000/recipe?item=\"+name}>\n\t\t\t\t\t<img src={\"data/\"+name} height=\"100\" width=\"100\" style={{marginLeft: '10px'}} />\n\t\t\t\t</a>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<Router>\t\t\t\t\n        \t<div>\n\t        \t<br/>\n\t        \t<div className=\"col-sm-12\">\n        \t\t\t<h3>Image Uploader</h3><hr/>\n\t        \t\t<div className=\"col-sm-4\">\n\t\t        \t\t<input className=\"form-control \" type=\"file\" onChange={this.selectFiles} multiple/>\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t<div className=\"col-sm-4\">\n\t\t            \t<button className=\"btn btn-primary\" value=\"Submit\" onClick={this.uploadImages}>Upload</button>\n\t\t        \t\t</div><br/><br/><br/>\n\t\t\t\t\t\t<h5> Get recipe and cooking suggestions from ingredients</h5>\n\t\t        \t\t<input className=\"form-control \" placeholder=\"Enter ingredients\" type=\"text\" value={this.state.ingredients}  onChange={this.handleChange}/>\n\t\t\t\t\t\t<br/>\n\t\t            \t<button className=\"btn btn-primary\"   onClick={this.cookingSuggestions}>Fetch suggestions</button>\n\t\t\t\t\t\t<br/><br/>\n\n\t\t        \t</div>\n\t\t\t\t\t<div className=\"row col-lg-12\" >\n\t\t\t\t\t\t\t{suggestion_images}\n\t\t\t\t\t\t</div>\n\t\t        \t{ this.state.message? <p className=\"text-info\">{this.state.message}</p>: ''}\n\t\t        \t<br/><br/><br/><br/>\n\t            </div>\n\t            <br/><br/><br/><br/><br/>\n\t            <div className=\"row col-lg-12\">\n\t\t        \t{ \n\t\t\t          \tthis.state.imageUrls.map((url, i) => (\n\t\t\t\t          \t\t<div className=\"col-lg-2\" key={i}>\n\t\t\t\t          \t\t\t<img src={BASE_URL + url} className=\"img-rounded img-responsive\" alt=\"not available\"/><br/>\n\t\t\t\t          \t\t</div>\n\t\t\t\t          \t))\n\t\t\t        }\n\t\t\t\t\t<div className=\"row col-lg-12\">\n\t\t\t\t\t\t<img src={this.state.imageUrl} height=\"100\" width=\"100\" style={{marginLeft: '20px'}}/>\n\t\t\t\t\t\t<p style={{color:\"blue\"}}  style={{fontSize:\"18px\"}} style={{marginLeft: '20px'}}> {this.state.classification} </p>\t\n\t\t\t\t\t\t<button className=\"btn btn-primary\" value=\"Ingredients\" onClick={this.getIngredients} style={{marginLeft: '15px'}}>Get Ingredients</button>\n\t\t\t\t\t\t<ul>{all_recipes}</ul>\n\t\n\t\t\t\t\t\t<button className=\"btn btn-primary\" value=\"Similarity\" onClick={this.similarImages} style={{marginLeft: '15px'}}>Run similar images</button>\n\t\t\t\t\t\t<hr/>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"row col-lg-12\" >\n\t\t\t\t\t\t{images}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t\n\t\t    \t</div>\n\t\t\t</div>\n\n\t\t\t</Router>\t\n        );\n    }\n}\n\n/*\n\t\t\t\t\t\t<img src={\"food-101/images/\"+this.state.similar_images.split(',')[0]} height=\"100\" width=\"100\" style={{marginLeft: '10px'}} />\n\t\t\t\t\t\t<img src={\"food-101/images/\"+this.state.similar_images.split(',')[1]} height=\"100\" width=\"100\" style={{marginLeft: '10px'}}/>\n\t\t\t\t\t\t<img src={\"food-101/images/\"+this.state.similar_images.split(',')[2]} height=\"100\" width=\"100\" style={{marginLeft: '10px'}} />\n\t\t\t\t\t\t<img src={\"food-101/images/\"+this.state.similar_images.split(',')[3]} height=\"100\" width=\"100\" style={{marginLeft: '10px'}} />\n\t\t\t\t\t\t<img src={\"food-101/images/\"+this.state.similar_images.split(',')[4]} height=\"100\" width=\"100\" style={{marginLeft: '10px'}} />\n\t\t\t\t\t\t<img src={\"food-101/images/\"+this.state.similar_images.split(',')[5]} height=\"100\" width=\"100\" style={{marginLeft: '10px'}} />\n\t\t\t\t\t\t<img src={\"food-101/images/\"+this.state.similar_images.split(',')[6]} height=\"100\" width=\"100\" style={{marginLeft: '10px'}} />\n\t\t\t\t\t\t<img src={\"food-101/images/\"+this.state.similar_images.split(',')[7]} height=\"100\" width=\"100\" style={{marginLeft: '10px'}} />\n\t\t\t\t\t\t<img src={\"food-101/images/\"+this.state.similar_images.split(',')[8]} height=\"100\" width=\"100\" style={{marginLeft: '10px'}} />\n\n*/\n\n//\t\t\t\t\t<img src={'images/uploads/1587074014137-cake2.jpg'} height=\"100\" width=\"100\" />\n\nexport default App; \t\t\t","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport Ingredients from './Components/fetchImages';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\n\n//ReactDOM.render(<App />, document.getElementById('root'));\n\nReactDOM.render(\n    <BrowserRouter>\n      <Switch>\n      <Route exact path=\"/\" component={App}/>\n      <Route path=\"/recipe\" component={Ingredients}/>\n    </Switch>\n    </BrowserRouter>,\n    document.getElementById('root')\n  );"],"sourceRoot":""}